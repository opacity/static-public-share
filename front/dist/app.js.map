{"version":3,"sources":["src/config.ts","src/SiteWrapper.tsx","src/pages/SharePage/preview-renderer.tsx","src/pages/SharePage/preview.tsx","src/pages/SharePage/SharePage.tsx","src/index.tsx"],"names":["aos_1d","init","once","anchorPlacement","offset","delay","duration","logo","__fusereq","Component","constructor","props","state","showMobileMenu","showLoginModal","showSignUpModal","SetMobileMenu","setState","render","loggedIn","localStorage","getItem","isHome","config_1","bind","tabler_react_1","Link","window","open","children","footer_1d","SiteWrapper","PreviewRenderer","url","text","e","selection","getSelection","isCollapsed","range","document","createRange","selectNode","currentTarget","removeAllRanges","addRange","textAlign","split","map","paragraph","i","setText","react_1","fetch","then","res","catch","err","console","warn","getTypeFromExt","ext","replace","includes","undefined","Preview","type","className","onLoad","onUnload","newType","preview_renderer_1","react_markdown_1d","width","react_file_icon_1","shareImg","SharePage","history","file","OpacityFile","pageLoading","setPageLoading","downloadFile","blob","Blob","file_saver_1","title","SiteWrapper_1d","react_bootstrap_1","padding","preview_1","fileExtension","mimeType","justifyContent","react_loading_1d","SharePage_1d","App","getElementById"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBAAwB;;;;;;;;;;;;;;;;;;;;ACWxBA,eAAIC;EACFC,MAAM;EACNC,iBAAiB;EACjBC,QAAQ;EACRC,OAAO;EACPC,UAAU;;MAENC,OAAOC;AAmBb,kCAAgCC;EAC9BC,YAAYC;IACV,MAAMA;IACN,KAAKC;MACHC,gBAAgB;MAChBC,gBAAgB;MAChBC,iBAAiB;;;EAGrBC;IACE,KAAKC;MAAWJ,iBAAiB,KAAKD,MAAMC;;;EAG9CK;UACQC,WAAWC,aAAaC,QAAQ,SAAS,OAAO;;iBAErC;;iBAGT,KAAKV,MAAMW,SACP,uDACA;;iBAGS;;iBACC;;YACHC,oBAAW;iBAAe;;WACvBhB;aAAY;cAAY;WAAS;iBAAoB;;iBAC/C;;iBAIR;YACL;wBACU;wBACA;uBACA,KAAKK,MAAMC;eACjB,KAAKG,cAAcQ,KAAK;;iBAEjB;;iBAGH;UAA8B;;iBAC5B;;iBACC;;iBACE;;YACHD,oBAAW;iBAAuB;;iBAI/B;;YACHA,oBAAW;iBAAwB;;iBAIhC;6BACXE,mBAAIC;YAAU;;iBAEH;OACXP;iBAEkB;6BACZM;iBACW;eACD;QACPE,OAAOC,QAAQL,kCAAyB;;;iBAO/B;6BACZE;iBACW;eACD;QACPE,OAAOC,QAAQL,2BAAkB;;;iBAU/B;OACXJ;iBACgB;6BACZM;iBACW;eACD;QACPE,OAAOC,QAAQL,sBAAa;;;iBAOnB;6BACZE;iBACW;eACD;QACP,KAAKR;UAAWH,gBAAgB;;;2EAY/C,KAAKF,MAAMC;iBACK;;iBACE;;iBACC;;iBACE;;YACHU,oBAAW;iBAAuB;;iBAI/B;;YACHA,oBAAW;iBAAwB;;iBAIhC;6BACXE,mBAAIC;YAAU;kBAIfP;iBAEkB;;YACHI,oBAAW;iBAA2B;;iBAKrC;eACD;QACPI,OAAOC,QAAQL,sBAAa;;6BAG7BE,mBAAIC;iBAKO;6BACXD,mBAAIC;YAAU;;iBAGL;eACD;QACP,KAAKT;UAAWH,gBAAgB;;;6BAGjCW,mBAAIC,8BAYxB,KAAKf,MAAMkB,gCACXC;;;kBAMMC;;;;;;;;;;;;;;MCjNTC,kBAAkB,EACtBC,KACAf,SAASgB,AAAA;WAEIC,AAAA;UACDC,YAAYC;QAEdD,aAAaA,UAAUE;YACnBC,QAAQC,SAASC;MACvBF,MAAMG,WAAWP,EAAEQ;MAEnBP,UAAUQ;MACVR,UAAUS,SAASN;;;;IAIrBO,WAAW;;GAGZZ,KAAKa,MAAM,OAAOC,IAAI,CAACC,WAAWC;OAAcA;GAAID;SAIlDf,MAAMiB,WAAWC;EAExBA,kBAAU;IACRC,MAAMpB,KACHqB,KAAKC,AAAA,OAAOA,IAAIrB,QAChBoB,KAAKpB,AAAA,QAAQiB,QAAQjB,OACrBsB,MAAMC,AAAA,OAAOC,QAAQC,KAAKF;MAC3BxB;yEAKCC,QAAQhB,OAAOgB;;;;;;;;;;;;;;;MCtChB0B,iBAAiB,AAACC;EACtBA,OAAO,KAAKA,KAAKC,QAAQ,OAAO;OAG9B,OACA,QAEA,OAEA,OAEA,OAEA,OACA,OAEA,OACA,QACA,QACA,SACA,OAEA,QACAC,SAASF;WACF;;OAIP,OACA,OACA,QACAE,SAASF;WACF;;OAIP,OACA,QACAE,SAASF;WACF;;OAIP,OACA,MACAE,SAASF;WACF;;SAGFG;;MAYHC,UAAU,EACdJ,KACAK,MACAjC,KACAkC,WACAC,QACAC;EAEAjB,kBAAU;IACRgB,UAAUA;WAEH;MACLC,YAAYA;;;QAIVC,UAAU,MAAMJ,QAAQN,eAAeC;UAErCS,QAAQvB,MAAM,KAAK;SACpB;;mBACoBoB;aAAgBlC;;SACpC;;mBAGYkC;kBACD;;aAEGlC;cAAWiC;;SAIzB;;mBAGYC;kBACD;;aAEGlC;cAAWiC;;SAIzB;cACKI,QAAQvB,MAAM,KAAK;aACpB;;uBAEeoB;4CACbI;iBACMtC;oBACGC,AAAA,uCAASsC;sBAAsBtC;;;;;uBAM3BiC;4CACbI;iBAAqBtC;;;;;;UAKTwC,OAAO;;wCACzBC;eACO;oBACK;SACPA,gCAAcb;mBACPA;;;;;;;;;;;;;;;;;;;;;;;MC1Hfc,WAAWnE;MAeXoE,YAAY,EAAGC;QACbC,OAAO1B,gBAAQ,MAAMzB,OAAOoD,cAAcpD,OAAOoD;SAChDC,aAAaC,kBAAkB7B,iBAAS;QAEzC8B,eAAe;IACnBD,eAAe;UACT5B,6CAA6CyB,KAAK7C,OACrDqB,KAAKC,AAAA,OAAOA,IAAI4B,QAChB7B,KAAKC,AAAA;YACE4B,WAAWC,MAAM7B;MACvB8B,oBAAOF,MAAML,KAAKQ;MAClBL,eAAe;;;wGAMhBM;aAAqBV;oCACnBW;WAAgB;oCACdA,4DACEA;QAAQ;eAAa;oCACnBA;;MAAaC,SAAS;;;eACN;oCACZC;SACMZ,KAAK7C;SACL6C,KAAKa;UACJb,KAAKc;eACD;wCAKjBJ;QAAQ;eAAa;oCACnBA;eAAc;oCACZA;eAAc;;WACF;SAAUb;;eAEN;KAAiBG,QAAQA,KAAKQ;eAC9B;;eACA;;MAAoBO,gBAAgB;;;eAClC;;eACA;aAAqCX;;UAOtC3D,oBAAW;;eAGd;UAAmBA,oBAAW;YAAoB;mEASvEyD;eAA8B;oCAC3Bc;UAAkB;WAAwB;;;kBAQxClB;;;;;;;;;;;;ACxFf;+BAEKmB;;YAII7E,6BAAQ8E,YAAQxD,SAASyD,eAAe","file":"","sourcesContent":["export const HOME_URL = \"https://dev2.opacity.io\"\n","// @flow\n\nimport * as React from \"react\";\nimport type { ReactElement, ReactNode } from \"react\";\nimport { Nav, Button } from \"tabler-react\";\nimport AOS from \"aos\";\nimport type { NotificationProps } from \"tabler-react\";\nimport Footer from \"opacity-web2.0/src/components/footer/footer\";\nimport \"aos/dist/aos.css\";\nimport { HOME_URL } from \"./config\"\n\nAOS.init({\n  once: true,\n  anchorPlacement: \"center-bottom\",\n  offset: 200,\n  delay: 50,\n  duration: 700,\n});\nconst logo = require(\"./assets/logo.svg\");\ntype Props = {\n  children: ReactNode;\n  showSignUpModal?: boolean;\n  handleCloseSignUpModal?: Function;\n  showLoginModal?: boolean;\n  handleCloseLoginModal?: Function;\n  isHome?: boolean;\n  history: any;\n  recoveryHandle: string;\n};\n\ntype State = {\n  notificationsObjects?: Array<typeof NotificationProps>;\n  showMobileMenu: boolean;\n  showLoginModal: boolean;\n  showSignUpModal: boolean;\n};\n\nclass SiteWrapper extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showMobileMenu: false,\n      showLoginModal: false,\n      showSignUpModal: false,\n    };\n  }\n  SetMobileMenu() {\n    this.setState({ showMobileMenu: !this.state.showMobileMenu });\n  }\n\n  render(): ReactElement {\n    const loggedIn = localStorage.getItem('key') ? true : false;\n    return (\n      <div className='page'>\n        <header\n          className={\n            this.props.isHome\n              ? \"navbar navbar-expand-md navbar-light d-print-none \"\n              : \"navbar navbar-expand-md navbar-light d-print-none border-bottom\"\n          }\n        >\n          <div className='container-xl'>\n            <h1 className='navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3 mb-0'>\n              <a href={HOME_URL + '/'} className='logo-wrapper'>\n                <img src={logo} width='60' height='60' alt='Opacity' className='navbar-brand-image' />\n                <span className='ml-3'>OPACITY</span>\n              </a>\n            </h1>\n            <button\n              className='navbar-toggler'\n              type='button'\n              data-bs-toggle='collapse'\n              data-bs-target='#navbar-menu'\n              aria-expanded={this.state.showMobileMenu}\n              onClick={this.SetMobileMenu.bind(this)}\n            >\n              <span className='navbar-toggler-icon'></span>\n            </button>\n\n            <div className='collapse navbar-collapse' id='navbar-menu'>\n              <div className='d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center justify-content-end'>\n                <ul className='navbar-nav'>\n                  <li className='nav-item'>\n                    <a href={HOME_URL + '/platform'} className='nav-link'>\n                      Why Opacity?\n                    </a>\n                  </li>\n                  <li className='nav-item'>\n                    <a href={HOME_URL + '/community'} className='nav-link'>\n                      App Gallery\n                    </a>\n                  </li>\n                  <li className='nav-item'>\n                    <Nav.Link href='/blog'>Learn</Nav.Link>\n                  </li>\n                  <li className='nav-item'>\n                    {loggedIn ?\n                      (\n                        <div className='nav-link'>\n                          <Button\n                            className='btn btn-primary'\n                            onClick={() => {\n                              window.open(`${HOME_URL}/file-manager`, '_blank');\n                            }}\n                          >\n                            Dashboard\n                        </Button>\n                        </div>\n                      ) : (\n                        <div className='nav-link'>\n                          <Button\n                            className='btn btn-white btn-pill'\n                            onClick={() => {\n                              window.open(`${HOME_URL}/plans`, '_blank');\n                            }}\n                          >\n                            Explore Plans\n                      </Button>\n                        </div>\n                      )\n                    }\n\n                  </li>\n                  <li className='nav-item'>\n                    {loggedIn ? (\n                      <div className=''>\n                        <Button\n                          className='btn btn-primary'\n                          onClick={() => {\n                            window.open(`${HOME_URL}/`, '_blank');\n                          }}\n                        >\n                          Logout\n                        </Button>\n                      </div>\n                    ) : (\n                      <div className=''>\n                        <Button\n                          className='btn btn-primary btn-pill'\n                          onClick={() => {\n                            this.setState({ showLoginModal: true });\n                          }}\n                        >\n                          Log in\n                      </Button>\n                      </div>\n                    )}\n\n                  </li>\n                </ul>\n              </div>\n            </div>\n            {this.state.showMobileMenu && (\n              <div className='mobile-menu'>\n                <div className='d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center justify-content-center'>\n                  <ul className='navbar-nav'>\n                    <li className='nav-item'>\n                      <a href={HOME_URL + '/platform'} className='nav-link'>\n                        Why Opacity?\n                    </a>\n                    </li>\n                    <li className='nav-item'> \n                      <a href={HOME_URL + '/community'} className='nav-link'>\n                        App Gallery\n                    </a>\n                    </li>\n                    <li className='nav-item'>\n                      <Nav.Link href='/blog'>Learn</Nav.Link>\n                    </li>\n              \n                    {\n                      loggedIn ? (  \n                        <>\n                          <li className='nav-item'>\n                            <a href={HOME_URL + '/file-manager'} className='nav-link' >\n                              Dashboard \n                            </a>\n                          </li>\n                          <li\n                            className='nav-item'\n                            onClick={() => {  \n                              window.open(`${HOME_URL}/`, ' _blank');  \n                            }}\n                          >\n                            <Nav.Link>Logout</Nav.Link>\n                          </li>\n                        </>\n                      ) : (\n                        <>\n                          <li className='nav-item'>\n                            <Nav.Link href='/plans'>Explore Plans</Nav.Link>\n                          </li>\n                          <li\n                            className='nav-item'  \n                            onClick={() => {  \n                              this.setState({ showLoginModal: true });\n                            }}\n                          >\n                            <Nav.Link>Log in</Nav.Link>\n                          </li>\n                        </>\n                      )\n                    }\n\n                  </ul>\n                </div>\n              </div>\n            )}\n          </div>\n        </header>\n        {this.props.children}\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default SiteWrapper;\n","import React, { useEffect, useState } from \"react\";\n// import Spinner from \"../../components/shared/spinner\";\n\ntype PreviewRendererProps = {\n  url: string,\n  render?: (text: string) => JSX.Element | JSX.Element[]\n};\n\nconst PreviewRenderer = ({\n  url,\n  render = text => (\n    <div\n      onClick={e => {\n        const selection = getSelection();\n\n        if (selection && selection.isCollapsed) {\n          const range = document.createRange();\n          range.selectNode(e.currentTarget);\n\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n      }}\n      style={{\n        textAlign: 'left',\n      }}\n    >\n      {text.split(/\\n+/).map((paragraph, i) => <p key={i}>{paragraph}</p>)}\n    </div>\n  )\n}: PreviewRendererProps) => {\n  const [text, setText] = useState<string>();\n\n  useEffect(() => {\n    fetch(url)\n      .then(res => res.text())\n      .then(text => setText(text))\n      .catch(err => console.warn(err));\n  }, [url]);\n\n  return (\n    <>\n      {/* <Spinner isActive={!text} /> */}\n      {text && render(text)}\n    </>\n  );\n};\n\nexport { PreviewRenderer, PreviewRendererProps };\n","import React, { useEffect } from \"react\";\nimport { PreviewRenderer } from \"./preview-renderer\";\nimport ReactMarkdown from \"react-markdown\";\nimport { FileIcon, defaultStyles } from 'react-file-icon';\n\nconst getTypeFromExt = (ext?: string) => {\n  ext = (\"\" + ext).replace(/^\\./, \"\");\n\n  if ([\n    \"png\",\n    \"apng\",\n\n    \"svg\",\n\n    \"gif\",\n\n    \"bmp\",\n\n    \"ico\",\n    \"cur\",\n\n    \"jpg\",\n    \"jpeg\",\n    \"jfif\",\n    \"pjpeg\",\n    \"pjp\",\n\n    \"webp\"\n  ].includes(ext)) {\n    return \"image\";\n  }\n\n  if ([\n    \"mp4\",\n    \"ogg\",\n    \"webm\"\n  ].includes(ext)) {\n    return \"video\";\n  }\n\n  if ([\n    \"mp3\",\n    \"flac\"\n  ].includes(ext)) {\n    return \"audio\";\n  }\n\n  if ([\n    \"txt\",\n    \"md\",\n  ].includes(ext)) {\n    return \"text\";\n  }\n\n  return undefined;\n};\n\ntype PreviewProps = {\n  ext: string\n  type?: string\n  url: string\n  className?: string\n  onLoad?: () => void\n  onUnload?: () => void\n};\n\nconst Preview = ({\n  ext,\n  type,\n  url,\n  className,\n  onLoad,\n  onUnload\n}: PreviewProps) => {\n  useEffect(() => {\n    onLoad && onLoad();\n\n    return () => {\n      onUnload && onUnload();\n    };\n  });\n\n  const newType = \"\" + (type || getTypeFromExt(ext));\n\n  switch (newType.split(\"/\")[0]) {\n    case \"image\":\n      return <img className={className} src={url} />;\n    case \"video\":\n      return (\n        <video\n          className={className}\n          controls={true}\n        >\n          <source src={url} type={type} />\n          Your browser doesn't support this video type.\n        </video>\n      );\n    case \"audio\":\n      return (\n        <audio\n          className={className}\n          controls={true}\n        >\n          <source src={url} type={type} />\n          Your browser doesn't support this audio type.\n        </audio>\n      );\n    case \"text\":\n      switch (newType.split(\"/\")[1]) {\n        case \"markdown\":\n          return (\n            <div className={className}>\n              <PreviewRenderer\n                url={url}\n                render={text => <ReactMarkdown source={text} />}\n              />\n            </div>\n          );\n        default:\n          return (\n            <div className={className}>\n              <PreviewRenderer url={url} />\n            </div>\n          );\n      }\n    default:\n      return <div style={{ width: '300px' }}>\n        <FileIcon\n          color=\"#A8A8A8\"\n          glyphColor=\"#ffffff\"\n          {...defaultStyles[ext]}\n          extension={ext}\n        />\n      </div>;\n  }\n};\n\nexport { getTypeFromExt, Preview, PreviewProps };\n","import React, { useState, useMemo } from \"react\";\nimport SiteWrapper from \"../../SiteWrapper\";\nimport { Row, Col, Container } from \"react-bootstrap\";\nimport \"./SharePage.scss\";\nimport { HOME_URL } from \"../../config\"\nimport { Preview } from \"./preview\";\nimport { saveAs } from 'file-saver'\nimport ReactLoading from \"react-loading\";\n\nconst shareImg = require(\"../../assets/share-download.svg\");\n\ndeclare global {\n  interface window {\n    OpacityFile: {\n      url: string,\n      title: string,\n      description: string,\n      thumbnail: string,\n      mimeType: string,\n      fileExtension: string,\n    }\n  }\n}\n\nconst SharePage = ({ history }) => {\n  const file = useMemo(() => window.OpacityFile, [window.OpacityFile])\n  const [pageLoading, setPageLoading] = useState(false)\n\n  const downloadFile = async () => {\n    setPageLoading(true)\n    await fetch(`https://cors-anywhere.herokuapp.com/${file.url}`)\n      .then(res => res.blob())\n      .then(res => {\n        const blob = new Blob([res])\n        saveAs(blob, file.title)\n        setPageLoading(false)\n      })\n  }\n\n  return (\n    <>\n      <SiteWrapper history={history}>\n        <Container fluid='xl share'>\n          <Row>\n            <Col md={6} className='center' >\n              <Row style={{ padding: '20px' }}>\n                <div className='preview-area center'>\n                  <Preview\n                    url={file.url}\n                    ext={file.fileExtension}\n                    type={file.mimeType}\n                    className='preview-content'\n                  />\n                </div>\n              </Row>\n            </Col>\n            <Col md={6} className=\"control-area\">\n              <Row className='align-items-center'>\n                <Col className='text-center'>\n                  <img width='88' src={shareImg} />\n                  <h2>You have been invited to view a Public File!</h2>\n                  <div className='text-filename'>{file && file.title}</div>\n                  <div className='text-filesize'></div>\n                  <div className='row mb-3' style={{ justifyContent: 'center' }}>\n                    <div className='col-md-12'>\n                      <a className='btn btn-pill btn-download' onClick={downloadFile}>\n                        <span></span>\n                        Download File\n                    </a>\n                    </div>\n                  </div>\n                  <div>\n                    <div><a href={HOME_URL + \"/sign-up\"}>Get 10GB file storage and file sharing for free</a></div>\n                    Free to share ideas. Free to be protected. Free to be you.\n                  </div>\n                  <a className='learn-more' href={HOME_URL + \"/platform\"} target=\"_blank\">\n                    Learn More\n                  </a>\n                </Col>\n              </Row>\n            </Col>\n          </Row>\n        </Container>\n        {\n          pageLoading && <div className='loading'>\n            <ReactLoading type=\"spinningBubbles\" color=\"#2e6dde\" />\n          </div>\n        }\n      </SiteWrapper >\n    </>\n  )\n}\n\nexport default SharePage;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport SharePage from \"./pages/SharePage/SharePage\";\nimport \"./index.scss\";\n\nfunction App() {\n  return (\n    <SharePage />\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"]}